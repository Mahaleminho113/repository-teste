<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
    <style>
      body {
        background-color: black;
      }
      img {
        /* border: 4px solid black; */
        width: 90%;
        height: 90%;
        border-radius: 22%;
      }

      h3 {
        margin: 0%;
        width: 100px;
        text-align: center;
        color: darkgrey;
      }

      .images {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
      }

      .elementos {
        border-radius: 20%;
        display: flex;
        flex-direction: column;
        align-items: center;
        margin: 0%;
        border: 0%;
      }

      /* .elementos:hover {
        border: 3px solid black;
      } */
      .button {
        padding-right: 95%;
        padding-top: 3px;
        position: fixed;
        display: none;
      }
      .btn_voltar {
        border: none;
        width: 50px;
        height: 50px;
      }
      .btn_voltar:hover {
        width: 60px;
        height: 60px;
      }

      form {
        padding-bottom: 50px;
        padding-left: 5px;
      }

      .input {
        width: 100%;
        display: flex;
        flex-direction: row;
        position: fixed;
        top: 0px;
        padding-top: 5px;
        background-color: white;
      }
      .text {
        padding-left: 40%;
      }
    </style>
  </head>
  <body>
    <!-- minhas divs -->

    <!-- <div class="input">
      <div class="button"></div>
      <div class="text">Filtre por Raça:</div>
      <div class="form"></div>
    </div> -->
    <div class="images"></div>
    <script>
      //minha function Iniciar
      function iniciar(url) {
        fetch(url)
          .then((resp) => resp.json())
          .then(function (imagensR) {
            const arrayImages = imagensR.message;
            arrayImages.forEach((element) => {
              const raca = element.split("/")[4];
              const divElementos = document.createElement("div");
              divElementos.className = "elementos";
              const imagem = document.createElement("img");
              const tituloEl = document.createElement("h3");
              tituloEl.textContent = raca;
              imagem.src = element;
              divImages.appendChild(divElementos);
              divElementos.appendChild(imagem);
              divElementos.appendChild(tituloEl);

              imagem.addEventListener("click", function () {
                divImages.innerHTML = "";
                url_raca =
                  "http://127.0.0.1:5000/api/racas/" +
                  tituloEl.textContent.split("-")[0] +
                  "/imagens";
                iniciar(url_raca);
              });
            });
          })
          .catch(function (error) {
            console.log(error);
          });
      }
      // const divButton = document.querySelector(".button");
      const divImages = document.querySelector(".images");
      const url = "http://127.0.0.1:5000/api/racas/imagens/aleatorias/10";
      const arrayDog = [];
      const input = document.createElement("input");
      const btn = document.createElement("button");
      input.placeholder = "digite um numero de imagens aleatorios esperado";
      btn.textContent = "enviar";
      document.body.appendChild(input);
      document.body.appendChild(btn);

      btn.addEventListener("click", function () {
        console.log(input.value);
        url_picado = url.split("/");
        quantidade_imgs = url_picado.slice(0, -1).join("/");
        if (!isNaN(input.value)) {
          let url_teste = [];
          a = input.value;
          b = quantidade_imgs + "/" + a;
          c = [];
          url_teste.push(b);

          // url = b;
          iniciar(url_teste[0]);

          input.style.display = "none";
          btn.style.display = "none";

          console.log(url_teste);
        } else {
          console.log("nao é numero");
        }
        input.value = "";
      });

      //criando meu botão voltar como imagem
      const btn_voltar = document.createElement("img");
      // endereço da minha imagem
      btn_voltar.src = "./seta.png";
      //classe da minha imagem
      btn_voltar.className = "btn_voltar";
      //append da minha imagem na div de classe button
      divButton.appendChild(btn_voltar);
      //evento ao clicar na minha imagem
      btn_voltar.addEventListener("click", function () {
        //escondendo o a minha imagem ao clicar nela adicionando o style dela como none
        divButton.style.display = "none";
        //limpando meu HTml
        divImages.innerHTML = "";

        //chamando a funçao com o url do inicio raças aleatorias
        // iniciar(url);
      });

      const arrayRacas = [
        "Todos",
        "dingo",
        "vizsla",
        "papillon",
        "stbernard",
        "pyrenees",
        "puggle",
      ];

      // const select = document.querySelector("#options");
      const divform = document.querySelector(".form");
      const form = document.createElement("form");
      const selected = document.createElement("select");
      divform.appendChild(form);
      form.appendChild(selected);

      arrayRacas.forEach(function (raca) {
        const option = document.createElement("option");
        option.value = "https://dog.ceo/api/breed/" + raca + "/images";
        if (raca === "Todos") {
          option.value = "https://dog.ceo/api/breeds/image/random/50";
        } else {
          option.textContent = raca;
          selected.appendChild(option);
        }
      });

      selected.addEventListener("change", function () {
        divButton.style.display = "block";

        const dog = selected.value;
        divImages.innerHTML = "";
        iniciar(dog);
      });
    </script>
  </body>
</html>
